-content_for :javascripts do
  =javascript_include_tag "http://maps.google.com/maps/api/js?sensor=false"
  =javascript_include_tag "google_map"
  =javascript_include_tag "event"

.event
  %h1=@event.title
  %h2=raw event_inline_date(@event)

  .row
    .span4
      -if @event.main_image.present?
        = image_tag @event.main_image.thumb('300x200').url
      -else
        = image_tag("http://placehold.it/300x200")
      #event_map{'data-title'.to_sym => @event.title, 'data-lat'.to_sym => @event.lat, 'data-lng'.to_sym => @event.lng}
    .span8
      = raw event_address(@event)
      .description
        = raw @event.description

      / .rsvp
      /   - if current_member
      /     - if current_member.attending_event?(@event)
      /       -form_for EventMember.new, :url => cancel_rsvp_event_path(@event) do |f|
      /         =f.submit 'Attending (click to cancel RSVP)', :class => 'btn success'
      /     - else
      /       -form_for EventMember.new, :url => rsvp_event_path(@event) do |f|
      /         =f.submit 'RSVP', :class => 'btn danger'
      / 
      /     .event_members
      /       %h3 Attending Volunteers
      /       -@event.members.each do |member|
      /         .member_event_listing_div
      /           = member.first_name.to_s + ' ' + member.last_name.to_s + ' - ' + member.email.to_s
      /           %ul.member_event_dog_list
      /             - if @event_member.dogs.size > 0
      /               - @event_member.dogs.each do |dog|
      /                 %li{:id => 'event_dog_' + dog.id.to_s} 
      /                   =dog.name
      /           - if (member == current_member) && (current_member.dogs.size > @event_member.dogs.size)
      /             #event_add_dogs_div
      /               = link_to 'Add Dog', "javascript:void(0)", :class => 'event_add_dog_link', 'data-event-member-id'.to_sym => @event_member.id 


      .rsvp
        - if current_member
          - if current_member.attending_event?(@event)
            -form_for EventMember.new, :url => cancel_rsvp_event_path(@event) do |f|
              =f.submit 'Attending (click to cancel RSVP)', :class => 'btn success'
          - else
            -form_for EventMember.new, :url => rsvp_event_path(@event) do |f|
              =f.submit 'RSVP', :class => 'btn danger'
      
          .event_members
            %h3 Attending Volunteers
            -@event.members.each do |member|
              .member_event_listing_div
                = member.first_name.to_s + ' ' + member.last_name.to_s + ' - ' + member.email.to_s
                - if (member == current_member) && (current_member.dogs.size > @event_member.dogs.size)
                  = link_to 'Add Dog', "javascript:void(0)", :class => 'event_add_dog_link', 'data-event-member-id'.to_sym => @event_member.id 
                %ul.member_event_dog_list
                  - if @event_member && @event_member.dogs.size > 0
                    - @event_member.event_member_dogs.each do |em_dog|
                      %li 
                        = em_dog.dog.name
                        = link_to('Remove', "javascript:void(0)", :class => 'event_dog_remove_link', 'data-event-member-id'.to_sym => @event_member.id, 'data-event-member-dog-id'.to_sym => em_dog.id)
                 
              
.clearfix